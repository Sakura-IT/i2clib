.KEY type

Set asmopts "-iSYS:ASS/include -xlisting"

If <type> EQ all
  List #?.i TO RAM:script LFORMAT "make %m"
  Execute RAM:script
  Quit 0
EndIf

If <type> EQ clean
  Delete listing #?.o
  List #?.i TO RAM:script LFORMAT "delete i2c.library.%m"
  Execute RAM:script
  Quit 0
EndIf

If <type> EQ bcu
  a68k $asmopts i2c.library.bcu.s
  Blink i2c.library.bcu.o
  Skip cleanup
EndIf

If <type> EQ card
  a68k $asmopts i2c.library.card.s
  Blink i2c.library.card.o
  Skip cleanup
EndIf

If <type> EQ disk
  a68k $asmopts i2c.library.disk.s
  Blink i2c.library.disk.o
  Skip cleanup
EndIf

If NOT EXISTS <type>.i
  Quit 5
EndIf
a68k $asmopts -h<type>.i i2c.library.s
Blink i2c.library.o
Copy i2c.library i2c.library.<type>

LAB cleanup
Delete i2c.library #?.o
